# PlantUML Compatibility Rule

**CRITICAL**: Always ensure PlantUML diagrams are compatible with Cursor's PlantUML extension and other PlantUML viewers.

## PlantUML Compatibility Requirements

### 1. Theme Directive Issues
**FORBIDDEN**: Use `!theme plain` directive in PlantUML files
```plantuml
# FORBIDDEN: Causes syntax errors in many PlantUML viewers
@startuml
!theme plain
skinparam classFontSize 12
# ... rest of diagram
@enduml

# CORRECT: Use standard skinparam directives
@startuml
skinparam classFontSize 12
skinparam classFontStyle bold
# ... rest of diagram
@enduml
```

### 2. Standard PlantUML Styling
**MANDATORY**: Use standard `skinparam` directives for styling
```plantuml
# CORRECT: Standard styling approach
@startuml
skinparam classFontSize 12
skinparam classFontStyle bold
skinparam classAttributeIconSize 0
skinparam packageStyle rectangle
skinparam activityFontSize 12
skinparam activityFontStyle bold
skinparam sequenceMessageAlign center
skinparam responseMessageBelowArrow true
# ... diagram content
@enduml
```

### 3. File Extension Standards
**MANDATORY**: Use `.puml` extension for all PlantUML files
- **Class Diagrams**: `class_diagram.puml`
- **Sequence Diagrams**: `sequence_diagram.puml`
- **Activity Diagrams**: `activity_diagram.puml`
- **Component Diagrams**: `component_diagram.puml`
- **Deployment Diagrams**: `deployment_diagram.puml`

### 4. Diagram Organization
**MANDATORY**: Organize PlantUML files in dedicated directories
```
docs/
├── architecture/
│   └── diagrams/
│       ├── class_diagram.puml
│       ├── sequence_diagram.puml
│       ├── activity_diagram.puml
│       ├── component_diagram.puml
│       └── deployment_diagram.puml
└── README.md
```

### 5. Cursor Extension Compatibility
**MANDATORY**: Ensure diagrams work with Cursor's PlantUML extension
- Test diagrams in Cursor's PlantUML preview
- Verify syntax highlighting works correctly
- Ensure real-time preview functions properly
- Test export functionality (PNG, SVG, PDF)

### 6. Common Compatibility Issues
**AVOID**: These patterns that cause viewer compatibility issues
```plantuml
# FORBIDDEN: Theme directives
!theme plain
!theme bluegray
!theme cerulean

# FORBIDDEN: Non-standard skinparam combinations
skinparam theme plain
skinparam theme bluegray

# FORBIDDEN: Complex theme inheritance
!theme plain
!include theme.puml
```

### 7. Recommended Styling Approach
**MANDATORY**: Use this standardized styling approach
```plantuml
@startuml Diagram Title

' Standard styling for all diagram types
skinparam classFontSize 12
skinparam classFontStyle bold
skinparam classAttributeIconSize 0
skinparam packageStyle rectangle

' Activity diagram specific
skinparam activityFontSize 12
skinparam activityFontStyle bold
skinparam activityDiamondFontSize 10
skinparam activityDiamondFontStyle normal

' Sequence diagram specific
skinparam sequenceMessageAlign center
skinparam responseMessageBelowArrow true
skinparam maxMessageSize 150

' Component diagram specific
skinparam componentFontSize 12
skinparam componentFontStyle bold
skinparam interfaceFontSize 10
skinparam interfaceFontStyle normal

' Diagram content here
# ... actual diagram elements

@enduml
```

### 8. Testing and Validation
**MANDATORY**: Test all PlantUML files before committing
1. **Cursor Preview**: Test in Cursor's PlantUML extension
2. **Online Server**: Test on PlantUML online server
3. **Local Rendering**: Test with local PlantUML installation
4. **Syntax Check**: Verify no syntax errors or warnings

### 9. Documentation Standards
**MANDATORY**: Include PlantUML diagrams in documentation
```markdown
# Architecture Documentation

## System Overview
![Class Diagram](diagrams/class_diagram.png)

## Process Flow
![Activity Diagram](diagrams/activity_diagram.png)

## Component Architecture
![Component Diagram](diagrams/component_diagram.png)
```

### 10. Version Control
**MANDATORY**: Include both source and rendered diagrams
- Commit `.puml` source files
- Include rendered `.png` or `.svg` files for documentation
- Use consistent naming conventions
- Document diagram dependencies and relationships

## Benefits

- **Compatibility**: Works with all PlantUML viewers and extensions
- **Maintainability**: Standard styling approach across all diagrams
- **Consistency**: Uniform appearance and behavior
- **Reliability**: No syntax errors or rendering issues
- **Portability**: Diagrams work across different environments

## Enforcement

This rule is **ALWAYS APPLIED** and must be followed for all:
- New PlantUML diagram creation
- Existing diagram modifications
- Documentation updates
- Code reviews involving diagrams
- Project setup and configuration

**Violations of this rule require immediate remediation.**
description:
globs:
alwaysApply: true
---
