name: ğŸ§® Hilbert Consistency Validation

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  validate-hilbert-consistency:
    runs-on: ubuntu-latest
    name: ğŸŒŸ Mathematical Beauty Validation
    
    steps:
    - name: ğŸ“¥ Checkout Beautiful Code
      uses: actions/checkout@v4
      
    - name: ğŸ Setup Python for Excellence
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
        
    - name: ğŸ§® Run Hilbert Consistency Validation
      run: |
        echo "ğŸŒŸ Building Beautiful and Useful Systems"
        echo "ğŸ§® Purpose: Mathematical beauty through systematic consistency"
        python scripts/hilbert_consistency_validator.py --scope docs/agile --write-report --report-path docs/agile/validation/hilbert_consistency_report.md
        
    - name: ğŸ“Š Check Consistency Score
      run: |
        # Extract consistency score from validation output
        SCORE=$(python -c "
        import json
        try:
            with open('scripts/validation_config.json', 'r') as f:
                config = json.load(f)
            threshold = config['ci_integration']['failure_threshold']
            print(f'Threshold: {threshold}%')
        except:
            print('Threshold: 95.0%')
        ")
        echo "$SCORE"
        
    - name: ğŸ“‹ Upload Validation Report
      uses: actions/upload-artifact@v4
      with:
        name: hilbert-consistency-report
        path: docs/agile/validation/hilbert_consistency_report.md
        
    - name: ğŸ’ Beauty Celebration
      if: success()
      run: |
        echo "âœ¨ SYSTEMATIC EXCELLENCE VALIDATED!"
        echo "ğŸ§® Mathematical beauty through Hilbert consistency achieved!"
        echo "ğŸŒŸ Building something beautiful and useful - our sacred purpose!"
