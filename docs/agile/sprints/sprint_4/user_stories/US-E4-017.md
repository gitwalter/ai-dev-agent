# User Story: US-E4-017 - Extract Real Agent Artifacts from Workflow Outputs

**Epic**: EPIC-0 - Development Excellence
**Sprint**: Sprint 4  
**Priority**: Critical  
**Story Points**: 8  
**Status**: Backlog  

## Story Description

**As a** developer using the AI-Dev-Agent system  
**I want** real artifacts generated by each agent displayed in the UI  
**So that** I can see what each agent actually produced and access those outputs  

## Root Cause Analysis

**Critical Issue Found**: Lines 617-636 in `apps/main.py` contain fake hardcoded artifacts:
```python
artifacts = result.get("artifacts", [])
if not artifacts:
    # Extract meaningful artifacts based on agent type
    if agent_name == "requirements_analyst":
        artifacts = ["Requirements specification", "Feature list", "Project scope document"]
    elif agent_name == "code_generator":
        # Check if we have actual generated code
        output = result.get("output", {})
        if isinstance(output, dict) and "generated_code" in output:
            artifacts = ["Python source files", "Test files", "Configuration files"]
        else:
            artifacts = ["Generated code files", "Implementation modules"]
```

These are lies! They don't represent actual artifacts generated by the workflow.

## Current Behavior (Broken)
- All agents show generic, hardcoded artifact lists
- Artifacts don't correspond to actual generated files
- No connection to real workflow outputs like code files, docs, tests
- Users can't access or verify actual agent-generated content

## Expected Behavior (Fixed)
- Each agent displays its actual artifacts from the workflow execution
- Artifacts should be real files and outputs produced
- Artifact data should link to actual generated content
- Different projects should show different artifacts based on what was generated

## Real Artifacts Investigation

Based on the workflow structure, real artifacts should include:
- **Code Generator**: Actual generated Python files, test files, configs
- **Documentation Generator**: Real README.md, API docs, usage guides
- **Requirements Analyst**: Actual requirements files, specifications
- **Architecture Designer**: Real architecture diagrams, design documents
- **Test Generator**: Actual test files, test configurations

These should come from `state.get("code_files", {})`, `state.get("test_files", {})`, `state.get("documentation", {})`, etc.

## Acceptance Criteria

### Technical Requirements
- [ ] Remove all hardcoded artifact defaults from lines 617-636
- [ ] Extract real artifacts from agent workflow outputs
- [ ] Map agent outputs to actual generated files
- [ ] Link artifacts to accessible file content

### Data Investigation Requirements
- [ ] Examine `state.get("code_files", {})` for actual generated code
- [ ] Check `state.get("test_files", {})` for real test artifacts
- [ ] Look at `state.get("documentation", {})` for documentation artifacts
- [ ] Investigate `result.get("output", {})` for agent-specific outputs

### File System Integration
- [ ] Link artifacts to actual files in the generated_projects directory
- [ ] Provide download/view capabilities for real artifacts
- [ ] Show file sizes, modification dates, and content previews
- [ ] Verify artifacts exist and are accessible

### Testing Requirements
- [ ] Test with different project types to verify varying artifacts
- [ ] Verify artifacts correspond to actual generated files
- [ ] Confirm UI can display and link to real artifacts
- [ ] Test artifact access and download functionality

### Documentation Requirements
- [ ] Document the artifact extraction logic
- [ ] Map workflow outputs to artifact types
- [ ] Create artifact management architecture guide

## Definition of Done
- Real artifacts extracted from workflow file outputs
- UI displays actual generated files and content
- Artifacts are accessible and verifiable
- Zero hardcoded fake artifacts in the codebase
- Artifact management is reliable and functional

## Investigation Plan
1. **File Output Analysis**: Examine workflow file generation in detail
2. **Artifact Source Mapping**: Connect agents to their actual file outputs
3. **Extraction Logic**: Build real artifact extraction from file system
4. **Access Layer**: Implement artifact viewing and download capabilities

## Technical Debt
Fake hardcoded artifacts violate our core principle of data integrity. Users need access to real generated content, not fictional artifact lists. This is critical for system credibility and usefulness.
